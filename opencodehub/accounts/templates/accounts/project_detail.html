{% extends 'accounts/base.html' %}
{% block content %}
<div class="container mt-4">
  <h2>{{ project.title }}</h2>
  <p>{{ project.description }}</p>
  <small>Owner: {{ project.owner.username }}</small>

  <hr>
  <h4>Files</h4>
  {% if files %}
    <ul>
      {% for file in files %}
        <li>
          <a href="{{ file.file.url }}" download>{{ file.name }}</a>
          ({{ file.size }} bytes)
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No files uploaded yet.</p>
  {% endif %}
  <a href="{% url 'upload_file' project.id %}" class="btn btn-primary btn-sm">Upload Files</a>

  <hr>
  <h4>Comments</h4>
  {% if comments %}
    <ul>
      {% for comment in comments %}
        <li>
          <strong>{{ comment.author.username }}</strong> ({{ comment.created_at }}):  
          {{ comment.text }}
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No comments yet.</p>
  {% endif %}

  <!-- âœ… Add comment form -->
  <form method="post" class="mt-3">
    {% csrf_token %}
    <div class="mb-3">
      <textarea name="text" rows="3" class="form-control" placeholder="Write a comment..." required></textarea>
    </div>
    <button type="submit" class="btn btn-success">Post Comment</button>
  </form>

  <hr>
  <h4>Version History</h4>
  {% if versions %}
    <ul>
      {% for version in versions %}
        <li>{{ version.version_number }} - {{ version.created_at }}</li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No versions available.</p>
  {% endif %}
</div>
{% endblock %}
